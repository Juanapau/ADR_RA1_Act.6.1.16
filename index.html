
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Ejercicio interactivo sobre confidencialidad de informaci√≥n en reportes empresariales">
  <meta name="author" content="Ing. Juana Alt. Paulino">
  <title>Casos de Estudio - Confidencialidad</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      line-height: 1.6;
      min-height: 100vh;
    }

    .container { max-width: 1200px; margin: 0 auto; }

    .header {
      background: white;
      border-radius: 15px;
      padding: 40px;
      text-align: center;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .header h1 { color: #1e3a8a; font-size: 2.5em; margin-bottom: 10px; }
    .header p { color: #64748b; font-size: 1.1em; }

    .instructions {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-left: 6px solid #f59e0b;
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .instructions h2 { color: #92400e; margin-bottom: 15px; font-size: 1.5em; }
    .instructions p { color: #78350f; margin-bottom: 15px; }
    .instructions ol { margin-left: 25px; color: #1e3a8a; }
    .instructions li { margin: 10px 0; font-weight: 600; }

    .student-info {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }

    .student-info h3 { color: #1e3a8a; margin-bottom: 15px; font-size: 1.3em; }
    .input-group { margin-bottom: 15px; }
    .input-group label { display: block; color: #475569; font-weight: 600; margin-bottom: 5px; }
    
    .input-group input {
      width: 100%;
      padding: 12px;
      border: 2px solid #cbd5e1;
      border-radius: 8px;
      font-size: 1em;
      transition: border-color 0.3s;
    }

    .input-group input:focus { outline: none; border-color: #3b82f6; }

    .tab-container {
      background: white;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    }

    .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
    
    .tab-button {
      padding: 12px 24px;
      border: none;
      background: #e2e8f0;
      color: #475569;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }

    .tab-button:hover { background: #cbd5e1; }
    
    .tab-button.active {
      background: linear-gradient(135deg, #3b82f6 0%, #1e3a8a 100%);
      color: white;
    }

    .tab-content { display: none; }
    .tab-content.active { display: block; animation: fadeIn 0.5s; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .scenario {
      background: white;
      border-radius: 15px;
      margin-bottom: 30px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .scenario-header {
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
      color: white;
      padding: 25px;
    }

    .scenario-header.green {
      background: linear-gradient(135deg, #059669 0%, #10b981 100%);
    }

    .scenario-header.purple {
      background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
    }

    .scenario-header.orange {
      background: linear-gradient(135deg, #ea580c 0%, #f97316 100%);
    }

    .scenario-header.red {
      background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
    }

    .scenario-header h2 { font-size: 1.5em; margin-bottom: 8px; }
    .scenario-header h3 { font-size: 1em; opacity: 0.9; font-weight: 400; }
    .scenario-content { padding: 30px; }

    .report-box {
      background: #f8fafc;
      border: 2px solid #cbd5e1;
      border-radius: 10px;
      padding: 25px;
      font-family: 'Courier New', monospace;
      font-size: 0.85em;
      white-space: pre-wrap;
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
    }

    .questions-box {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border-left: 5px solid #3b82f6;
      border-radius: 10px;
      padding: 20px;
    }

    .questions-box h4 { color: #1e3a8a; margin-bottom: 15px; font-size: 1.3em; }

    .answer-input {
      width: 100%;
      min-height: 80px;
      padding: 12px;
      border: 2px solid #cbd5e1;
      border-radius: 8px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-size: 0.95em;
      resize: vertical;
      margin-top: 8px;
      transition: border-color 0.3s;
    }

    .answer-input:focus {
      outline: none;
      border-color: #3b82f6;
      background-color: #f0f9ff;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 20px;
    }

    .submit-button {
      background: linear-gradient(135deg, #3b82f6 0%, #1e3a8a 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 10px;
      font-size: 1em;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
    }

    .submit-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.5);
    }

    .teacher-button {
      background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 10px;
      font-size: 1em;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(220, 38, 38, 0.4);
    }

    .teacher-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(220, 38, 38, 0.5);
    }

    .clear-button {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 10px;
      font-size: 1em;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
    }

    .clear-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(245, 158, 11, 0.5);
    }

    .success-message {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 15px;
      border-radius: 10px;
      margin-top: 15px;
      text-align: center;
      font-weight: 600;
      display: none;
    }

    .download-section {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      border-radius: 15px;
      padding: 30px;
      text-align: center;
      margin-top: 30px;
    }

    .download-section h3 { color: white; font-size: 1.5em; margin-bottom: 15px; }

    .download-button {
      background: white;
      color: #059669;
      border: none;
      padding: 15px 40px;
      border-radius: 10px;
      font-size: 1em;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .download-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }

    .teacher-section {
      background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
      border-radius: 15px;
      padding: 30px;
      margin-top: 30px;
    }

    .teacher-section h3 { color: white; font-size: 1.5em; margin-bottom: 10px; text-align: center; }
    .teacher-section p { color: rgba(255, 255, 255, 0.9); text-align: center; margin-bottom: 20px; }

    .teacher-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
    }

    @media (max-width: 768px) {
      .header h1 { font-size: 1.8em; }
      .header { padding: 25px; }
      .tabs { flex-direction: column; }
      .tab-button { width: 100%; }
      .button-group { flex-direction: column; }
      .submit-button, .teacher-button, .clear-button, .download-button { width: 100%; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìä Casos de Estudio: Confidencialidad en Reportes</h1>
      <p>M√≥dulo: An√°lisis y Dise√±o de Reportes | Prof. Ing. Juana Alt. Paulino</p>
    </div>

    <div class="instructions">
      <h2>üìã Instrucciones</h2>
      <p>Analiza los siguientes escenarios empresariales y responde las preguntas sobre confidencialidad de informaci√≥n:</p>
      <ol>
        <li>Completa tu informaci√≥n personal</li>
        <li>Selecciona un escenario de la pesta√±a correspondiente</li>
        <li>Lee cuidadosamente el reporte presentado</li>
        <li>Responde todas las preguntas sobre confidencialidad</li>
        <li>Env√≠a tus respuestas y descarga tu an√°lisis en PDF</li>
      </ol>
    </div>

    <div class="student-info">
      <h3>üë§ Informaci√≥n del Estudiante</h3>
      <div class="input-group">
        <label for="studentName">Nombre Completo:</label>
        <input type="text" id="studentName" placeholder="Ingresa tu nombre completo" required>
      </div>
      <div class="input-group">
        <label for="currentDate">Fecha:</label>
        <input type="date" id="currentDate" required>
      </div>
    </div>

    <div class="tab-container">
      <div class="tabs">
        <button class="tab-button active" onclick="showTab(1)">Escenario 1</button>
        <button class="tab-button" onclick="showTab(2)">Escenario 2</button>
        <button class="tab-button" onclick="showTab(3)">Escenario 3</button>
        <button class="tab-button" onclick="showTab(4)">Escenario 4</button>
        <button class="tab-button" onclick="showTab(5)">Escenario 5</button>
      </div>

      <div id="tab1" class="tab-content active">
        <div class="scenario">
          <div class="scenario-header">
            <h2>Escenario 1: Datos Personales de Estudiantes</h2>
            <h3>Reporte Acad√©mico Trimestral</h3>
          </div>
          <div class="scenario-content">
            <div class="report-box">
            Centro Educativo - Tercer Trimestre 2024
CURSO: 5to. Secundaria - Secci√≥n B

1. P√âREZ GONZ√ÅLEZ, MAR√çA JOS√â
   C√©dula: 402-2345678-9
   Direcci√≥n: Calle Principal #45
   Tel√©fono: 809-555-1234
   Tel√©fono madre: 809-555-5678
   Promedio: 92.5

2. RODR√çGUEZ SANTOS, PEDRO LUIS
   C√©dula: 402-3456789-0
   Direcci√≥n: Av. Libertad #123
   Tel√©fono madre: 809-555-6789
   Promedio: 67.3
   Observaci√≥n: Necesita refuerzo

Promedio curso: 78.4
Aprobados: 25 | Reprobados: 3</div>

            <div class="questions-box">
              <h4>üí≠ Preguntas de An√°lisis</h4>
              <p><strong>1. ¬øQu√© informaci√≥n en este reporte consideras confidencial y por qu√©?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>2. ¬øQui√©nes deber√≠an tener acceso a este reporte dentro de la empresa?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>3. ¬øQu√© riesgos existen si esta informaci√≥n se filtra a la competencia?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>4. ¬øQu√© medidas de protecci√≥n implementar√≠as para este reporte?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>5. ¬øQu√© consecuencias legales o √©ticas podr√≠a tener el mal manejo de esta informaci√≥n?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>
            </div>

            <div class="button-group">
              <button class="submit-button" onclick="submitAnswers(1)">üì§ Enviar Respuestas</button>
              <button class="download-button" onclick="downloadStudentPDF()">üìÑ Descargar mi PDF</button>
            </div>
            <div class="success-message"></div>
          </div>
        </div>
      </div>

      <div id="tab2" class="tab-content">
        <div class="scenario">
          <div class="scenario-header green">
            <h2>Escenario 2: Informaci√≥n Financiera</h2>
            <h3>Informe Financiero Mensual</h3>
          </div>
          <div class="scenario-content">
            <div class="report-box">
              INFORME FINANCIERO - Octubre 2024
CONFIDENCIAL

Ingresos: RD$ 4,850,000
- Mensualidades: RD$ 3,200,000
- Inscripciones: RD$ 450,000

Banco Popular #1234-5678-90
Saldo: RD$ 3,890,000

Egresos: RD$ 3,110,000
- N√≥mina: RD$ 1,850,000
- Operativos: RD$ 785,000

Cuentas por cobrar: RD$ 1,450,000
- Familia G√≥mez: RD$ 85,000 (4 meses)
- Familia Jim√©nez: RD$ 105,000 (5 meses)

Credenciales:
Usuario: admin_finanzas
Clave: CFin2024#Segura</div>

            <div class="questions-box">
              <h4>üí≠ Preguntas de An√°lisis</h4>
              <p><strong>1. ¬øQu√© informaci√≥n en este reporte consideras confidencial y por qu√©?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>2. ¬øQui√©nes deber√≠an tener acceso a este reporte dentro del hospital?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>3. ¬øQu√© riesgos existen si esta informaci√≥n se hace p√∫blica?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>4. ¬øQu√© medidas de protecci√≥n implementar√≠as para este reporte?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>5. ¬øQu√© consecuencias legales o √©ticas podr√≠a tener el mal manejo de esta informaci√≥n?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>
            </div>

            <div class="button-group">
              <button class="submit-button" onclick="submitAnswers(2)">üì§ Enviar Respuestas</button>
              <button class="download-button" onclick="downloadStudentPDF()">üìÑ Descargar mi PDF</button>
            </div>
            <div class="success-message"></div>
          </div>
        </div>
      </div>

      <div id="tab3" class="tab-content">
        <div class="scenario">
          <div class="scenario-header purple">
            <h2>Escenario 3: Datos de N√≥mina</h2>
            <h3>Reporte de N√≥mina Mensual</h3>
          </div>
          <div class="scenario-content">
            <div class="report-box">
              N√ìMINA NOVIEMBRE 2024
CONFIDENCIAL

1. M√âNDEZ L√ìPEZ, ROBERTO
   C√©dula: 001-0234567-8
   Cargo: Profesor Matem√°ticas
   Salario base: RD$ 45,000
   Bonificaci√≥n: RD$ 5,000
   Total: RD$ 50,000
   Neto: RD$ 42,845
   Cuenta: Banco Popular #4567-8901-23
   Tel: 809-555-4567

2. GARC√çA SANTOS, ISABEL
   C√©dula: 001-1345678-9
   Cargo: Profesora Lengua
   Salario base: RD$ 38,000
   Neto: RD$ 35,727
   Cuenta: BHD #7890-1234-56

3. FERN√ÅNDEZ CRUZ, PEDRO
   Cargo: Director Acad√©mico
   Salario base: RD$ 75,000
   Neto: RD$ 79,708

Total n√≥mina: RD$ 287,219 </div>

            <div class="questions-box">
              <h4>üí≠ Preguntas de An√°lisis</h4>
              <p><strong>1. ¬øQu√© informaci√≥n en este reporte consideras confidencial y por qu√©?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>2. ¬øQui√©nes deber√≠an tener acceso a este reporte dentro del banco?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>3. ¬øQu√© riesgos existen si esta informaci√≥n se filtra?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>4. ¬øQu√© medidas de protecci√≥n implementar√≠as para este reporte?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>5. ¬øQu√© consecuencias legales o √©ticas podr√≠a tener el mal manejo de esta informaci√≥n?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>
            </div>

            <div class="button-group">
              <button class="submit-button" onclick="submitAnswers(3)">üì§ Enviar Respuestas</button>
              <button class="download-button" onclick="downloadStudentPDF()">üìÑ Descargar mi PDF</button>
            </div>
            <div class="success-message"></div>
          </div>
        </div>
      </div>

      <div id="tab4" class="tab-content">
        <div class="scenario">
          <div class="scenario-header orange">
            <h2>Escenario 4: Evaluaciones Individuales</h2>
            <h3>Informe de Examen Final</h3>
          </div>
          <div class="scenario-content">
            <div class="report-box">
              RESULTADOS EXAMEN FINAL
An√°lisis y Dise√±o de Reportes -5to.B de Secundaria

1. G√ìMEZ P√âREZ, ANDREA
   Matr√≠cula: 2024-5B-001
   Calificaci√≥n: 48/100 - REPROBADO
   Situaci√≥n: Padres divorciados
   Recomendaci√≥n: Tutor√≠a

2. MART√çNEZ, CARLOS
   Matr√≠cula: 2024-5B-002
   Calificaci√≥n: 95/100 - HONORES
   Recomendaci√≥n: Olimpiadas

3. L√ìPEZ, MIGUEL
   Matr√≠cula: 2024-5B-004
   Calificaci√≥n: 38/100 - REPROBADO
   Incidentes: 3 reportes disciplinarios
   Observaci√≥n: Copiando en examen
   Recomendaci√≥n: Evaluaci√≥n psicol√≥gica

Promedio: 71.2
Aprobados: 18 (72%)
Reprobados: 7 (28%)

            </div>

            <div class="questions-box">
              <h4>üí≠ Preguntas de An√°lisis</h4>
              <p><strong>1. ¬øQu√© informaci√≥n en este reporte consideras confidencial y por qu√©?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>2. ¬øQui√©nes deber√≠an tener acceso a este reporte dentro de la empresa?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>3. ¬øQu√© riesgos existen si esta informaci√≥n se hace p√∫blica?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>4. ¬øQu√© medidas de protecci√≥n implementar√≠as para este reporte?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>5. ¬øQu√© consecuencias legales o √©ticas podr√≠a tener el mal manejo de esta informaci√≥n?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>
            </div>

            <div class="button-group">
              <button class="submit-button" onclick="submitAnswers(4)">üì§ Enviar Respuestas</button>
              <button class="download-button" onclick="downloadStudentPDF()">üìÑ Descargar mi PDF</button>
            </div>
            <div class="success-message"></div>
          </div>
        </div>
      </div>

      <div id="tab5" class="tab-content">
        <div class="scenario">
          <div class="scenario-header red">
            <h2>Escenario 5: Informaci√≥n M√©dica</h2>
            <h3>Registro M√©dico Estudiantil</h3>
          </div>
          <div class="scenario-content">
            <div class="report-box">
              EXPEDIENTES M√âDICOS
SECRETO PROFESIONAL

EXPEDIENTE #1
RODR√çGUEZ, KARLA - 15 a√±os
Diagn√≥stico: Diabetes Tipo 1
Tratamiento: Insulina diaria
Contacto emergencia: 809-555-7890

EXPEDIENTE #2
GONZ√ÅLEZ, JOS√â - 15 a√±os
Diagn√≥stico: Asma Bronquial Moderada
Tratamiento: Inhalador preventivo
Alergias: Polen, √°caros

EXPEDIENTE #3
P√âREZ, MIGUEL - 15 a√±os
Diagn√≥stico: VIH Positivo
Estado: Controlado, indetectable
Tratamiento: Antirretroviral

‚ö†Ô∏è INFORMACI√ìN ULTRA CONFIDENCIAL
‚ö†Ô∏è SOLO ENFERMERA Y DIRECTORA
‚ö†Ô∏è PROTEGER DE BULLYING

            </div>

            <div class="questions-box">
              <h4>üí≠ Preguntas de An√°lisis</h4>
              <p><strong>1. ¬øQu√© informaci√≥n en este reporte consideras confidencial y por qu√©?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>2. ¬øQui√©nes deber√≠an tener acceso a este reporte?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>3. ¬øQu√© riesgos existen si esta informaci√≥n se filtra?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>4. ¬øQu√© medidas de protecci√≥n implementar√≠as para este reporte?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>

              <p><strong>5. ¬øQu√© consecuencias legales o √©ticas podr√≠a tener el mal manejo de esta informaci√≥n?</strong></p>
              <textarea class="answer-input" placeholder="Escribe tu an√°lisis aqu√≠..."></textarea>
            </div>

            <div class="button-group">
              <button class="submit-button" onclick="submitAnswers(5)">üì§ Enviar Respuestas</button>
              <button class="download-button" onclick="downloadStudentPDF()">üìÑ Descargar mi PDF</button>
            </div>
            <div class="success-message"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="teacher-section">
      <h3>üîê Panel del Docente</h3>
      <p>Funciones exclusivas de la docente</p>
      <div class="teacher-buttons">
        <button class="teacher-button" onclick="downloadTeacherReport()">üìä Generar Reporte Consolidado</button>
        <button class="clear-button" onclick="clearAllData()">üóëÔ∏è Limpiar Todos los Datos</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    // CONFIGURACI√ìN: Reemplaza con tu URL de Google Apps Script
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzkmEAFa8L_EWCchPtrlcnPQK7UAGDtrSc0VJCsRI6-XXkcD02nU1a1dCVma6A8cEUi4g/exec';
    
    let submittedAnswers = [];

    const scenarioTitles = [
      'Escenario 1: Empresa Manufacturera',
      'Escenario 2: Instituci√≥n de Salud',
      'Escenario 3: Instituci√≥n Bancaria',
      'Escenario 4: Recursos Humanos',
      'Escenario 5: Desarrollo de Software'
    ];

    function showTab(num) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      
      document.getElementById('tab' + num).classList.add('active');
      document.querySelectorAll('.tab-button')[num - 1].classList.add('active');
    }

    function submitAnswers(scenarioNum) {
      const name = document.getElementById('studentName').value.trim();
      const date = document.getElementById('currentDate').value;
      
      if (!name || !date) {
        alert('‚ö†Ô∏è Por favor completa tu nombre y fecha antes de enviar');
        return;
      }

      const tab = document.getElementById('tab' + scenarioNum);
      const textareas = tab.querySelectorAll('.answer-input');
      const answers = [];
      let allComplete = true;
      
      textareas.forEach(ta => {
        const value = ta.value.trim();
        if (!value) allComplete = false;
        answers.push(value);
      });

      if (!allComplete) {
        alert('‚ö†Ô∏è Por favor responde todas las preguntas antes de enviar');
        return;
      }

      const submission = {
        studentName: name,
        date: date,
        scenario: scenarioNum,
        scenarioTitle: scenarioTitles[scenarioNum - 1],
        answers: answers,
        timestamp: new Date().toISOString()
      };

      submittedAnswers.push(submission);
      
      try {
        const stored = JSON.parse(localStorage.getItem('confidencialidad_answers') || '[]');
        stored.push(submission);
        localStorage.setItem('confidencialidad_answers', JSON.stringify(stored));
      } catch (e) {
        console.warn('No se pudo guardar localmente:', e);
      }
      
      sendToGoogleSheets(submission, tab);
    }

    function sendToGoogleSheets(data, tab) {
      const successMsg = tab.querySelector('.success-message');
      successMsg.textContent = 'üì§ Enviando a Google Sheets...';
      successMsg.style.background = 'linear-gradient(135deg, #3b82f6 0%, #1e3a8a 100%)';
      successMsg.style.display = 'block';

      if (!GOOGLE_SCRIPT_URL || GOOGLE_SCRIPT_URL.includes('TU_URL')) {
        console.warn('‚ö†Ô∏è URL de Google Sheets no configurada');
        successMsg.textContent = '‚úÖ Respuestas guardadas localmente (configura Google Sheets en el c√≥digo)';
        successMsg.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
        setTimeout(() => successMsg.style.display = 'none', 5000);
        return;
      }

      fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(() => {
        successMsg.textContent = '‚úÖ ¬°Respuestas enviadas exitosamente a Google Sheets!';
        successMsg.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
        setTimeout(() => successMsg.style.display = 'none', 4000);
      })
      .catch(error => {
        console.error('Error:', error);
        successMsg.textContent = '‚ö†Ô∏è Guardado localmente. Verifica la conexi√≥n con Google Sheets.';
        successMsg.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
        setTimeout(() => successMsg.style.display = 'none', 5000);
      });
    }

    function downloadStudentPDF() {
      const name = document.getElementById('studentName').value.trim();
      const date = document.getElementById('currentDate').value;
      
      if (!name || !date) {
        alert('‚ö†Ô∏è Por favor completa tu nombre y fecha');
        return;
      }

      const tab = document.querySelector('.tab-content.active');
      const textareas = tab.querySelectorAll('.answer-input');
      const answers = [];
      let allComplete = true;
      
      textareas.forEach(ta => {
        const value = ta.value.trim();
        if (!value) allComplete = false;
        answers.push(value);
      });

      if (!allComplete) {
        alert('‚ö†Ô∏è Por favor responde todas las preguntas antes de descargar el PDF');
        return;
      }

      const scenarioTitle = tab.querySelector('.scenario-header h2').textContent;
      const scenarioSubtitle = tab.querySelector('.scenario-header h3').textContent;

      try {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        
        // Encabezado
        doc.setFontSize(18);
        doc.setFont(undefined, 'bold');
        doc.text('ANALISIS DE CONFIDENCIALIDAD', 105, 20, { align: 'center' });
        
        doc.setFontSize(10);
        doc.setFont(undefined, 'normal');
        doc.text('Modulo: Analisis y Diseno de Reportes', 105, 28, { align: 'center' });
        doc.text('Prof. Ing. Juana Alt. Paulino', 105, 34, { align: 'center' });
        
        // L√≠nea separadora
        doc.setDrawColor(59, 130, 246);
        doc.setLineWidth(0.5);
        doc.line(20, 38, 190, 38);
        
        // Informaci√≥n del estudiante
        doc.setFontSize(11);
        doc.setFont(undefined, 'bold');
        doc.text('Estudiante:', 20, 46);
        doc.setFont(undefined, 'normal');
        doc.text(name, 50, 46);
        
        doc.setFont(undefined, 'bold');
        doc.text('Fecha:', 20, 53);
        doc.setFont(undefined, 'normal');
        doc.text(date, 50, 53);
        
        // Escenario
        doc.setFontSize(12);
        doc.setFont(undefined, 'bold');
        doc.text(scenarioTitle, 20, 65);
        doc.setFontSize(10);
        doc.setFont(undefined, 'italic');
        doc.text(scenarioSubtitle, 20, 71);
        
        // L√≠nea separadora
        doc.setDrawColor(203, 213, 225);
        doc.line(20, 75, 190, 75);
        
        // Preguntas y respuestas
        let y = 83;
        const questions = [
          '1. Que informacion es confidencial y por que?',
          '2. Quienes deberian tener acceso?',
          '3. Que riesgos existen si se filtra?',
          '4. Que medidas de proteccion implementarias?',
          '5. Que consecuencias legales o eticas podria tener?'
        ];

        questions.forEach((q, i) => {
          if (y > 260) {
            doc.addPage();
            y = 20;
          }
          
          // Pregunta
          doc.setFont(undefined, 'bold');
          doc.setFontSize(10);
          const questionLines = doc.splitTextToSize(q, 170);
          doc.text(questionLines, 20, y);
          y += (questionLines.length * 5) + 3;
          
          // Respuesta
          doc.setFont(undefined, 'normal');
          doc.setFontSize(9);
          const answerLines = doc.splitTextToSize(answers[i] || 'Sin respuesta', 165);
          doc.text(answerLines, 25, y);
          y += (answerLines.length * 4.5) + 10;
        });

        // Pie de p√°gina en la √∫ltima p√°gina
        const pageCount = doc.internal.getNumberOfPages();
        doc.setPage(pageCount);
        doc.setFontSize(8);
        doc.setTextColor(100);
        doc.text('Centro Educativo Nuestra Sra. De la Altagracia', 105, 285, { align: 'center' });

        const fileName = 'Analisis_Confidencialidad_' + name.replace(/\s+/g, '_') + '.pdf';
        doc.save(fileName);
        alert('‚úÖ ¬°PDF descargado exitosamente!\n\nArchivo: ' + fileName);
      } catch (error) {
        alert('‚ùå Error al generar el PDF. Verifica que la librer√≠a jsPDF est√© cargada.');
        console.error('Error PDF:', error);
      }
    }

    function downloadTeacherReport() {
      const pin = prompt('üîê Ingresa el PIN de acceso (solo docentes):');
      if (pin !== '1070') {
        alert('‚ùå PIN incorrecto. Acceso denegado.');
        return;
      }

      // Cargar respuestas desde localStorage
      try {
        const stored = localStorage.getItem('confidencialidad_answers');
        if (stored) {
          submittedAnswers = JSON.parse(stored);
        }
      } catch (e) {
        console.error('Error al cargar respuestas:', e);
      }

      if (submittedAnswers.length === 0) {
        alert('‚ö†Ô∏è No hay respuestas guardadas todav√≠a.\n\nEspera a que los estudiantes env√≠en sus respuestas.');
        return;
      }

      try {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        
        // P√°gina de portada
        doc.setFontSize(20);
        doc.setFont(undefined, 'bold');
        doc.text('REPORTE CONSOLIDADO', 105, 80, { align: 'center' });
        doc.text('DE ESTUDIANTES', 105, 90, { align: 'center' });
        
        doc.setFontSize(12);
        doc.setFont(undefined, 'normal');
        doc.text('Modulo: Analisis y Diseno de Reportes', 105, 110, { align: 'center' });
        doc.text('Prof. Ing. Juana Alt. Paulino', 105, 118, { align: 'center' });
        doc.text('Centro Educativo Nuestra Sra. De la Altagracia', 105, 126, { align: 'center' });
        
        doc.setFontSize(11);
        doc.setFont(undefined, 'bold');
        doc.text('Total de estudiantes: ' + submittedAnswers.length, 105, 145, { align: 'center' });
        doc.setFont(undefined, 'normal');
        doc.text('Fecha del reporte: ' + new Date().toLocaleDateString('es-DO'), 105, 153, { align: 'center' });

        const questions = [
          '1. Que informacion es confidencial y por que?',
          '2. Quienes deberian tener acceso?',
          '3. Que riesgos existen si se filtra?',
          '4. Que medidas de proteccion implementarias?',
          '5. Que consecuencias legales o eticas podria tener?'
        ];

        // Generar p√°gina para cada estudiante
        submittedAnswers.forEach((sub, idx) => {
          doc.addPage();
          
          // Encabezado de p√°gina
          doc.setFontSize(16);
          doc.setFont(undefined, 'bold');
          doc.text('Estudiante ' + (idx + 1) + ' de ' + submittedAnswers.length, 105, 20, { align: 'center' });
          
          // Informaci√≥n del estudiante
          doc.setFontSize(11);
          doc.setFont(undefined, 'bold');
          doc.text('Nombre:', 20, 32);
          doc.setFont(undefined, 'normal');
          doc.text(sub.studentName, 45, 32);
          
          doc.setFont(undefined, 'bold');
          doc.text('Fecha:', 20, 39);
          doc.setFont(undefined, 'normal');
          doc.text(sub.date, 45, 39);
          
          doc.setFont(undefined, 'bold');
          doc.text('Escenario:', 20, 46);
          doc.setFont(undefined, 'normal');
          const scenarioText = 'Escenario ' + sub.scenario + ' - ' + sub.scenarioTitle.split(':')[1].trim();
          doc.text(scenarioText, 45, 46);
          
          // L√≠nea separadora
          doc.setDrawColor(59, 130, 246);
          doc.setLineWidth(0.5);
          doc.line(20, 50, 190, 50);
          
          // Respuestas
          let y = 58;
          
          sub.answers.forEach((ans, i) => {
            if (y > 250) {
              doc.addPage();
              y = 20;
            }
            
            // Pregunta
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            const questionLines = doc.splitTextToSize(questions[i], 170);
            doc.text(questionLines, 20, y);
            y += (questionLines.length * 5) + 3;
            
            // Respuesta
            doc.setFont(undefined, 'normal');
            doc.setFontSize(9);
            const answerLines = doc.splitTextToSize(ans || 'Sin respuesta', 165);
            doc.text(answerLines, 25, y);
            y += (answerLines.length * 4.5) + 8;
          });
        });

        doc.save('Reporte_Consolidado_Confidencialidad.pdf');
        alert('‚úÖ Reporte consolidado descargado exitosamente!\n\nTotal de estudiantes: ' + submittedAnswers.length);
      } catch (error) {
        alert('‚ùå Error al generar el reporte consolidado.');
        console.error('Error:', error);
      }
    }

    function clearAllData() {
      const pin = prompt('üîê Ingresa el PIN de acceso (solo docentes):');
      if (pin !== '1070') {
        alert('‚ùå PIN incorrecto. Acceso denegado.');
        return;
      }

      // Cargar respuestas actuales
      try {
        const stored = localStorage.getItem('confidencialidad_answers');
        if (stored) {
          submittedAnswers = JSON.parse(stored);
        }
      } catch (e) {
        console.error('Error:', e);
      }

      if (submittedAnswers.length === 0) {
        alert('‚ÑπÔ∏è No hay datos para eliminar.');
        return;
      }

      const confirmation = confirm(
        '‚ö†Ô∏è ADVERTENCIA: Esta acci√≥n eliminar√° TODAS las respuestas\n\n' +
        'Total de registros: ' + submittedAnswers.length + ' estudiantes\n\n' +
        'üö® Esta acci√≥n NO SE PUEDE DESHACER\n\n' +
        '¬øDeseas continuar?'
      );
      
      if (!confirmation) return;

      const doubleCheck = confirm(
        'üî¥ CONFIRMACI√ìN FINAL\n\n' +
        '¬øEst√°s seguro de borrar ' + submittedAnswers.length + ' respuestas?\n\n' +
        'Esta es tu √∫ltima oportunidad para cancelar.'
      );
      
      if (!doubleCheck) return;

      try {
        // Limpiar datos locales
        submittedAnswers = [];
        localStorage.removeItem('confidencialidad_answers');
        
        // Intentar limpiar Google Sheets si est√° configurado
        if (GOOGLE_SCRIPT_URL && !GOOGLE_SCRIPT_URL.includes('TU_URL')) {
          fetch(GOOGLE_SCRIPT_URL + '?action=clear', {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action: 'clear', pin: pin })
          }).catch(e => console.warn('No se pudo limpiar Google Sheets:', e));
        }
        
        alert('‚úÖ Todos los datos han sido eliminados exitosamente.\n\nLocalStorage: Limpiado\nGoogle Sheets: Solicitud enviada');
      } catch (error) {
        alert('‚ùå Error al eliminar los datos.');
        console.error('Error:', error);
      }
    }

    // Inicializaci√≥n al cargar la p√°gina
    window.addEventListener('DOMContentLoaded', function() {
      try {
        const stored = localStorage.getItem('confidencialidad_answers');
        if (stored) {
          submittedAnswers = JSON.parse(stored);
          console.log('‚úÖ Respuestas cargadas desde localStorage:', submittedAnswers.length);
        }
      } catch (e) {
        console.warn('‚ö†Ô∏è No se pudieron cargar respuestas previas:', e);
      }
      
      // Establecer fecha actual
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('currentDate').value = today;
      
      console.log('‚úÖ Sistema de Confidencialidad inicializado correctamente');
      console.log('üìä Respuestas en memoria:', submittedAnswers.length);
    });
  </script>
</body>
</html>
